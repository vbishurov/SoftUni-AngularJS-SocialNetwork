<div class="container">

    <div class="center-form panel">
        <div class="panel-body">
            <h4 class="text-center"><i class="ion-person-add"></i> Sign up</h4>

            <form method="post"
                  ng-submit="registerForm.$valid && register(currentUser.username,currentUser.password,currentUser.confirmPassword,currentUser.name,currentUser.email,currentUser.gender)"
                  name="registerForm" novalidate>
                <div class="form-group has-feedback"
                     ng-class="{ 'has-error' : registerForm.username.$invalid && registerForm.username.$dirty }">
                    <input class="form-control input-lg" type="text" id="username" name="username" ng-model="currentUser.username"
                           placeholder="Username" ng-minlength="4" required autofocus>
                    <span class="ion-earth form-control-feedback"></span>
                </div>

                <div ng-messages="registerForm.username.$error" style="color:maroon" role="alert">
                    <div ng-message="minlength">Username must be at least 4 characters long</div>
                </div>

                <div class="form-group has-feedback"
                     ng-class="{ 'has-error' : registerForm.password.$invalid && registerForm.password.$dirty }">
                    <input class="form-control input-lg" type="password" name="password" ng-model="currentUser.password"
                           placeholder="Password" ng-minlength="6" required>
                    <span class="ion-key form-control-feedback"></span>
                </div>

                <div ng-messages="registerForm.password.$error" style="color:maroon" role="alert">
                    <div ng-message="minlength">Password must be at least 6 characters long</div>
                </div>

                <div class="form-group has-feedback"
                     ng-class="{ 'has-error' : registerForm.confirmPassword.$invalid && registerForm.confirmPassword.$dirty }">
                    <input class="form-control input-lg" type="password" name="currentUser.confirmPassword"
                           ng-model="confirmPassword"
                           placeholder="Confirm password" compare-to="password" required>
                    <span class="ion-key form-control-feedback"></span>
                </div>

                <div ng-messages="registerForm.confirmPassword.$error" style="color:maroon" role="alert">
                    <div ng-message="compareTo">Passwords do not match</div>
                </div>

                <div class="form-group has-feedback"
                     ng-class="{ 'has-error' : registerForm.name.$invalid && registerForm.name.$dirty }">
                    <input class="form-control input-lg" type="text" id="name" name="name" ng-model="currentUser.name"
                           placeholder="Name" ng-pattern="/^[A-Z][a-z]+\s[A-Z][a-z]+$/" required>
                    <span class="ion-person form-control-feedback"></span>
                </div>

                <div ng-messages="registerForm.name.$error" style="color:maroon" role="alert">
                    <div ng-message="pattern">Please enter valid first and last names</div>
                </div>

                <div class="form-group has-feedback"
                     ng-class="{ 'has-error' : registerForm.email.$invalid && registerForm.email.$dirty }">
                    <input class="form-control input-lg" type="text" id="email" name="email" ng-model="currentUser.email"
                           placeholder="Email" ng-pattern="/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/" required>
                    <span class="ion-at form-control-feedback"></span>
                </div>

                <div ng-messages="registerForm.email.$error" style="color:maroon" role="alert">
                    <div ng-message="pattern">Please enter a valid email</div>
                </div>

                <div class="form-group has-feedback"
                     ng-class="{ 'has-error' : registerForm.gender.$invalid && registerForm.gender.$dirty }"
                     ng-init="gender=1">
                    <div class="radio">
                        <label for="male">
                            <input type="radio" id="male" name="gender" ng-model="currentUser.gender" value="1">
                            Male
                        </label>

                    </div>
                    <div class="radio">
                        <label for="female">
                            <input type="radio" id="female" name="gender" ng-model="currentUser.gender" value="2">
                            Female
                        </label>
                    </div>
                    <div class="radio">
                        <label for="other">
                            <input type="radio" id="other" name="gender" ng-model="currentUser.gender" value="0">
                            Other
                        </label>
                    </div>
                    <span class="ion-transgender form-control-feedback"></span>
                </div>

                <button type="submit" class="btn btn-block btn-primary" ng-disabled="registerForm.$invalid || clicked">
                    Register
                </button>
                <br/>

                <p class="text-center text-muted">
                    <small>Already have an account? <a href="#/login">Log in now</a></small>
                </p>

                <div ng-if="error" style="white-space: pre;" class="alert alert-danger">{{errorMessage}}</div>
            </form>
        </div>
    </div>

</div>